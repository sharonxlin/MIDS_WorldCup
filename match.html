<!DOCTYPE html>
<meta charset="utf-8">
 <head>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Lato">
  </head>
<style>
body { 
  color: #FFFFFF; 
  font: normal 10px "Lato"; 
  margin: 2em; 
}
#map {
  border:2px solid #000;
  width:960px;
  height:550px;
  background: #EEEEEE;
}

#slider-range {
  border:2px solid #000;
  width:960px;
  background: #EEEEEE;
}

#time {
  font: normal 20px "Lato"; 
}

.country {
  fill: #ccc;
  stroke: #fff;
  stroke-width: .5px;
  stroke-linejoin: round;
}

.hidden { 
  display: none; 
}

div.tooltip {
  color: #222; 
  background: #fff; 
  padding: .5em; 
  text-shadow: #f5f5f5 0 1px 0;
  border-radius: 2px; 
  box-shadow: 0px 0px 2px 0px #a6a6a6; 
  opacity: 0.9; 
  position: absolute;
}

.team1style {
  width: 300px;
  display: inline-block;
  text-align: right;
  padding-right: 10px;
  color:#8C1515;
  font-weight: bold;
}

.team2style {
  width: 300px;
  display: inline-block;
  text-align: left;
  padding-left: 10px;
  color: #003262;
  font-weight: bold;
}

.scorestyle {
  padding-right: 10px;
  padding-left: 10px;
}

#matches {
  width: 960px;
  height: 50px;
  font: normal 35px "Lato";
  text-align: center;
}


</style>
<link rel="stylesheet" type="text/css" href="map_js/jquery-ui-1.11.0.custom/jquery-ui.min.css">
<body>
<div align="center" id="drop">
  <select>
  <option value="Match01">6/12 Group Stage: BRA vs CRO</option>
  <option value="Match02">6/13 Group Stage: MEX vs CMR</option>
  <option value="Match03">6/13 Group Stage: ESP vs NED</option>
  <option value="Match04">6/13 Group Stage: CHI vs AUS</option>
  <option value="Match05">6/14 Group Stage: COL vs GRE</option>
  <option value="Match06">6/14 Group Stage: URU vs CRC</option>
  <option value="Match07">6/14 Group Stage: ENG vs ITA</option>
  <option value="Match08">6/15 Group Stage: CIV vs JPN</option>
  <option value="Match09">6/15 Group Stage: SUI vs ECU</option>
  <option value="Match10">6/15 Group Stage: FRA vs HON</option>
  <option value="Match11">6/15 Group Stage: ARG vs BIH</option>
  <option value="Match12">6/16 Group Stage: GER vs POR</option>
  <option value="Match13">6/16 Group Stage: IRN vs NGA</option>
  <option value="Match14">6/16 Group Stage: GHA vs USA</option>
  <option value="Match15">6/17 Group Stage: BEL vs ALG</option>
  <option value="Match16">6/17 Group Stage: BRA vs MEX</option>
  <option value="Match17">6/17 Group Stage: RUS vs KOR</option>
  <option value="Match18">6/18 Group Stage: AUS vs NED</option>
  <option value="Match19">6/18 Group Stage: ESP vs CHI</option>
  <option value="Match20">6/18 Group Stage: CMR vs CRO</option>
  <option value="Match21">6/19 Group Stage: COL vs CIV</option>
  <option value="Match22">6/19 Group Stage: URU vs ENG</option>
  <option value="Match23">6/19 Group Stage: JPN vs GRE</option>
  <option value="Match24">6/20 Group Stage: ITA vs CRC</option>
  <option value="Match25">6/20 Group Stage: SUI vs FRA</option>
  <option value="Match26">6/20 Group Stage: HON vs ECU</option>
  <option value="Match27">6/21 Group Stage: ARG vs IRN</option>
  <option value="Match28">6/21 Group Stage: GER vs GHA</option>
  <option value="Match29">6/21 Group Stage: NGA vs BIH</option>
  <option value="Match30">6/22 Group Stage: BEL vs RUS</option>
  <option value="Match31">6/22 Group Stage: KOR vs ALG</option>
  <option value="Match32">6/22 Group Stage: USA vs POR</option>
  <option value="Match33">6/23 Group Stage: AUS vs ESP</option>
  <option value="Match34">6/23 Group Stage: NED vs CHI</option>
  <option value="Match35">6/23 Group Stage: CMR vs BRA</option>
  <option value="Match36">6/23 Group Stage: CRO vs MEX</option>
  <option value="Match37">6/24 Group Stage: ITA vs URU</option>
  <option value="Match38">6/24 Group Stage: CRC vs ENG</option>
  <option value="Match39">6/24 Group Stage: JPN vs COL</option>
  <option value="Match40">6/24 Group Stage: GRE vs CIV</option>
  <option value="Match41">6/25 Group Stage: NGA vs ARG</option>
  <option value="Match42">6/25 Group Stage: BIH vs IRN</option>
  <option value="Match43">6/25 Group Stage: HON vs SUI</option>
  <option value="Match44">6/25 Group Stage: ECU vs FRA</option>
  <option value="Match45">6/26 Group Stage: USA vs GER</option>
  <option value="Match46">6/26 Group Stage: POR vs GHA</option>
  <option value="Match47">6/26 Group Stage: KOR vs BEL</option>
  <option value="Match48">6/26 Group Stage: ALG vs RUS</option>
  <option value="Match49">6/28 Round of 16: BRA vs CHI</option>
  <option value="Match50">6/28 Round of 16: COL vs URU</option>
  <option value="Match51">6/29 Round of 16: NED vs MEX</option>
  <option value="Match52">6/29 Round of 16: CRC vs GRE</option>
  <option value="Match53">6/30 Round of 16: FRA vs NGA</option>
  <option value="Match54">6/30 Round of 16: GER vs ALG</option>
  <option value="Match55">7/01 Round of 16: ARG vs SUI</option>
  <option value="Match56">7/01 Round of 16: BEL vs USA</option>
  <option value="Match57">7/04 Quarterfinals: FRA vs GER</option>
  <option value="Match58">7/04 Quarterfinals: BRA vs COL</option>
  <option value="Match59">7/05 Quarterfinals: ARG vs BEL</option>
  <option value="Match60">7/05 Quarterfinals: NED vs CRC</option>
  <option value="Match61">7/08 Semifinals: BRA vs GER</option>
  <option value="Match62">7/09 Semifinals: NED vs ARG</option>
  <option value="Match63">7/12 Third Place: BRA vs NED</option>
  <option value="Match64">7/13 Final: GER vs ARG</option>
  </select>
</div></br>

<div id="matches">
  <div id="Match01">
    <span class="team1style">Brazil    </span><img src="images/flags/bra.png"/><span class="scorestyle">3-1</span><img src="images/flags/cro.png"/><span class="team2style"> Croatia    </span><br/>
  </div>
  <div id="Match02">
   <span class="team1style">Mexico    </span><img src="images/flags/mex.png"/><span class="scorestyle">1-0</span><img src="images/flags/cmr.png"/><span class="team2style"> Cameroon   </span><br/>
  </div>
  <div id="Match03">
   <span class="team1style">Spain     </span><img src="images/flags/esp.png"/><span class="scorestyle">1-5</span><img src="images/flags/ned.png"/><span class="team2style"> Netherlands  </span><br/>
  </div>
  <div id="Match04">   
   <span class="team1style">Chile     </span><img src="images/flags/chi.png"/><span class="scorestyle">3-1</span><img src="images/flags/aus.png"/><span class="team2style"> Australia  </span><br/>  
  </div>
  <div id="Match05">
    <span class="team1style">Colombia    </span><img src="images/flags/col.png"/><span class="scorestyle">3-0</span><img src="images/flags/gre.png"/><span class="team2style"> Greece   </span><br/>
  </div>
  <div id="Match06">
    <span class="team1style">Uruguay     </span><img src="images/flags/uru.png"/><span class="scorestyle">1-3</span><img src="images/flags/crc.png"/><span class="team2style"> Costa Rica </span><br/>
  </div>
  <div id="Match07">
    <span class="team1style">England     </span><img src="images/flags/eng.png"/><span class="scorestyle">1-2</span><img src="images/flags/ita.png"/><span class="team2style"> Italy    </span><br/>
  </div>
  <div id="Match08">
    <span class="team1style">Ivory Coast </span><img src="images/flags/civ.png"/><span class="scorestyle">2-1</span><img src="images/flags/jpn.png"/><span class="team2style"> Japan    </span><br/>
  </div>
  <div id="Match09">
    <span class="team1style">Switzerland </span><img src="images/flags/sui.png"/><span class="scorestyle">2-1</span><img src="images/flags/ecu.png"/><span class="team2style"> Ecuador    </span><br/>
  </div>
  <div id="Match10">
    <span class="team1style">France      </span><img src="images/flags/fra.png"/><span class="scorestyle">3-0</span><img src="images/flags/hon.png"/><span class="team2style"> Honduras   </span><br/>
  </div>
  <div id="Match11">
    <span class="team1style">Argentina   </span><img src="images/flags/arg.png"/><span class="scorestyle">2-1</span><img src="images/flags/bih.png"/><span class="team2style"> Bosnia-H.  </span><br/>
  </div>
  <div id="Match12">
    <span class="team1style">Germany   </span><img src="images/flags/ger.png"/><span class="scorestyle">4-0</span><img src="images/flags/por.png"/><span class="team2style"> Portugal   </span><br/>
  </div>
  <div id="Match13">
    <span class="team1style">Iran      </span><img src="images/flags/irn.png"/><span class="scorestyle">0-0</span><img src="images/flags/nga.png"/><span class="team2style"> Nigeria    </span><br/>
  </div>
  <div id="Match14">
    <span class="team1style">Ghana     </span><img src="images/flags/gha.png"/><span class="scorestyle">1-2</span><img src="images/flags/usa.png"/><span class="team2style"> USA      </span><br/>
  </div>
  <div id="Match15">
    <span class="team1style">Belgium   </span><img src="images/flags/bel.png"/><span class="scorestyle">2-1</span><img src="images/flags/alg.png"/><span class="team2style"> Algeria    </span><br/>
  </div>
  <div id="Match16">
    <span class="team1style">Brazil    </span><img src="images/flags/bra.png"/><span class="scorestyle">0-0</span><img src="images/flags/mex.png"/><span class="team2style"> Mexico   </span><br/>
  </div>
  <div id="Match17">
    <span class="team1style">Russia    </span><img src="images/flags/rus.png"/><span class="scorestyle">1-1</span><img src="images/flags/kor.png"/><span class="team2style"> South Korea  </span><br/>
  </div>
  <div id="Match18">
    <span class="team1style">Australia </span><img src="images/flags/aus.png"/><span class="scorestyle">2-3</span><img src="images/flags/ned.png"/><span class="team2style"> Netherlands  </span><br/>
  </div>
  <div id="Match19">
    <span class="team1style">Spain     </span><img src="images/flags/esp.png"/><span class="scorestyle">0-2</span><img src="images/flags/chi.png"/><span class="team2style"> Chile    </span><br/>
  </div>
  <div id="Match20">
    <span class="team1style">Cameroon  </span><img src="images/flags/cmr.png"/><span class="scorestyle">0-4</span><img src="images/flags/cro.png"/><span class="team2style"> Croatia    </span><br/>
  </div>
  <div id="Match21">
    <span class="team1style">Colombia  </span><img src="images/flags/col.png"/><span class="scorestyle">2-1</span><img src="images/flags/civ.png"/><span class="team2style"> Ivory Coast  </span><br/>
  </div>
  <div id="Match22">
    <span class="team1style">Uruguay   </span><img src="images/flags/uru.png"/><span class="scorestyle">2-1</span><img src="images/flags/eng.png"/><span class="team2style"> England    </span><br/>
  </div>
  <div id="Match23">
    <span class="team1style">Japan     </span><img src="images/flags/jpn.png"/><span class="scorestyle">0-0</span><img src="images/flags/gre.png"/><span class="team2style"> Greece   </span><br/>
  </div>
  <div id="Match24">
    <span class="team1style">Italy       </span><img src="images/flags/ita.png"/><span class="scorestyle">0-1</span><img src="images/flags/crc.png"/><span class="team2style"> Costa Rica </span><br/>
  </div>
  <div id="Match25">
    <span class="team1style">Switzerland </span><img src="images/flags/sui.png"/><span class="scorestyle">2-5</span><img src="images/flags/fra.png"/><span class="team2style"> France   </span><br/>
  </div>
  <div id="Match26">
    <span class="team1style">Honduras    </span><img src="images/flags/hon.png"/><span class="scorestyle">1-2</span><img src="images/flags/ecu.png"/><span class="team2style"> Ecuador    </span><br/>
  </div>
  <div id="Match27">
    <span class="team1style">Argentina   </span><img src="images/flags/arg.png"/><span class="scorestyle">1-0</span><img src="images/flags/irn.png"/><span class="team2style"> Iran     </span><br/>
  </div>
  <div id="Match28">
    <span class="team1style">Germany     </span><img src="images/flags/ger.png"/><span class="scorestyle">2-2</span><img src="images/flags/gha.png"/><span class="team2style"> Ghana    </span><br/>
  </div>
  <div id="Match29">
    <span class="team1style">Nigeria     </span><img src="images/flags/nga.png"/><span class="scorestyle">1-0</span><img src="images/flags/bih.png"/><span class="team2style"> Bosnia-H.  </span><br/>
  </div>
  <div id="Match30">
    <span class="team1style">Belgium      </span><img src="images/flags/bel.png"/><span class="scorestyle">1-0</span><img src="images/flags/rus.png"/><span class="team2style"> Russia   </span><br/>
  </div>
  <div id="Match31">
    <span class="team1style">South Korea  </span><img src="images/flags/kor.png"/><span class="scorestyle">2-4</span><img src="images/flags/alg.png"/><span class="team2style"> Algeria    </span><br/>
  </div>
  <div id="Match32">
    <span class="team1style">USA          </span><img src="images/flags/usa.png"/><span class="scorestyle">2-2</span><img src="images/flags/por.png"/><span class="team2style"> Portugal   </span><br/>
  </div>
  <div id="Match33">
    <span class="team1style">Australia   </span><img src="images/flags/aus.png"/><span class="scorestyle">0-3</span><img src="images/flags/esp.png"/><span class="team2style"> Spain    </span><br/>
  </div>
  <div id="Match34">
    <span class="team1style">Netherlands </span><img src="images/flags/ned.png"/><span class="scorestyle">2-0</span><img src="images/flags/chi.png"/><span class="team2style"> Chile    </span><br/>
  </div>
  <div id="Match35">  
    <span class="team1style">Cameroon    </span><img src="images/flags/cmr.png"/><span class="scorestyle">1-4</span><img src="images/flags/bra.png"/><span class="team2style"> Brazil   </span><br/>
  </div>
  <div id="Match36"> 
    <span class="team1style">Croatia     </span><img src="images/flags/cro.png"/><span class="scorestyle">1-3</span><img src="images/flags/mex.png"/><span class="team2style"> Mexico   </span><br/>
  </div>
  <div id="Match37">
    <span class="team1style">Italy       </span><img src="images/flags/ita.png"/><span class="scorestyle">0-1</span><img src="images/flags/uru.png"/><span class="team2style"> Uruguay    </span><br/>
  </div>
  <div id="Match38"> 
    <span class="team1style">Costa Rica  </span><img src="images/flags/crc.png"/><span class="scorestyle">0-0</span><img src="images/flags/eng.png"/><span class="team2style"> England    </span><br/>
  </div>
  <div id="Match39"> 
    <span class="team1style">Japan       </span><img src="images/flags/jpn.png"/><span class="scorestyle">1-4</span><img src="images/flags/col.png"/><span class="team2style"> Colombia   </span><br/>  
  </div>
  <div id="Match40"> 
    <span class="team1style">Greece      </span><img src="images/flags/gre.png"/><span class="scorestyle">2-1</span><img src="images/flags/civ.png"/><span class="team2style"> Ivory Coast  </span><br/>
  </div>
  <div id="Match41">
    <span class="team1style">Nigeria     </span><img src="images/flags/nga.png"/><span class="scorestyle">2-3</span><img src="images/flags/arg.png"/><span class="team2style"> Argentina  </span><br/>
  </div>
  <div id="Match42"> 
    <span class="team1style">Bosnia-H.   </span><img src="images/flags/bih.png"/><span class="scorestyle">3-1</span><img src="images/flags/irn.png"/><span class="team2style"> Iran     </span><br/>
  </div>
  <div id="Match43"> 
    <span class="team1style">Honduras    </span><img src="images/flags/hon.png"/><span class="scorestyle">0-3</span><img src="images/flags/sui.png"/><span class="team2style"> Switzerland  </span><br/>
  </div>
  <div id="Match44"> 
    <span class="team1style">Ecuador     </span><img src="images/flags/ecu.png"/><span class="scorestyle">0-0</span><img src="images/flags/fra.png"/><span class="team2style"> France   </span><br/>
  </div>
  <div id="Match45">
    <span class="team1style">United States </span><img src="images/flags/usa.png"/><span class="scorestyle">0-1</span><img src="images/flags/ger.png"/><span class="team2style"> Germany    </span><br/>
  </div>
  <div id="Match46">
    <span class="team1style">Portugal      </span><img src="images/flags/por.png"/><span class="scorestyle">2-1</span><img src="images/flags/gha.png"/><span class="team2style"> Ghana    </span><br/>
  </div>
  <div id="Match47">  
    <span class="team1style">South Korea   </span><img src="images/flags/kor.png"/><span class="scorestyle">0-1</span><img src="images/flags/bel.png"/><span class="team2style"> Belgium    </span><br/>
  </div>
  <div id="Match48">
    <span class="team1style">Algeria       </span><img src="images/flags/alg.png"/><span class="scorestyle">1-1</span><img src="images/flags/rus.png"/><span class="team2style"> Russia   </span><br/>
  </div>
  <div id="Match49">
    <span class="team1style">Brazil    </span><img src="images/flags/bra.png"/><span class="scorestyle">1-1</span><img src="images/flags/chi.png"/><span class="team2style"> Chile    </span><br/>
  </div>
  <div id="Match50">
    <span class="team1style">Colombia  </span><img src="images/flags/col.png"/><span class="scorestyle">2-0</span><img src="images/flags/uru.png"/><span class="team2style"> Uruguay    </span><br/>
  </div>
  <div id="Match51">
    <span class="team1style">Netherlands </span><img src="images/flags/ned.png"/><span class="scorestyle">2-1</span><img src="images/flags/mex.png"/><span class="team2style"> Mexico   </span><br/>
  </div>
  <div id="Match52">
    <span class="team1style">Costa Rica  </span><img src="images/flags/crc.png"/><span class="scorestyle">1-1</span><img src="images/flags/gre.png"/><span class="team2style"> Greece   </span><br/>
  </div>
  <div id="Match53">
    <span class="team1style">France    </span><img src="images/flags/fra.png"/><span class="scorestyle">2-0</span><img src="images/flags/nga.png"/><span class="team2style"> Nigeria    </span><br/>
  </div>
  <div id="Match54">
    <span class="team1style">Germany   </span><img src="images/flags/ger.png"/><span class="scorestyle">2-1</span><img src="images/flags/alg.png"/><span class="team2style"> Algeria    </span><br/>
  </div>
  <div id="Match55">
    <span class="team1style">Argentina   </span><img src="images/flags/arg.png"/><span class="scorestyle">1-0</span><img src="images/flags/sui.png"/><span class="team2style"> Switzerland  </span><br/>
  </div>
  <div id="Match56">
    <span class="team1style">Belgium     </span><img src="images/flags/bel.png"/><span class="scorestyle">2-1</span><img src="images/flags/usa.png"/><span class="team2style"> USA      </span><br/>
  </div>
  <div id="Match57">
    <span class="team1style">France    </span><img src="images/flags/fra.png"/><span class="scorestyle">0-1</span><img src="images/flags/ger.png"/><span class="team2style"> Germany    </span><br/>
  </div>
  <div id="Match58">
    <span class="team1style">Brazil    </span><img src="images/flags/bra.png"/><span class="scorestyle">2-1</span><img src="images/flags/col.png"/><span class="team2style"> Colombia   </span><br/>
  </div>
  <div id="Match59">
    <span class="team1style">Argentina   </span><img src="images/flags/arg.png"/><span class="scorestyle">1-0</span><img src="images/flags/bel.png"/><span class="team2style"> Belgium    </span><br/>
  </div>
  <div id="Match60">
    <span class="team1style">Netherlands </span><img src="images/flags/ned.png"/><span class="scorestyle">0-0</span><img src="images/flags/crc.png"/><span class="team2style"> Costa Rica </span><br/>
  </div>
  <div id="Match61">
    <span class="team1style">Brazil    </span><img src="images/flags/bra.png"/><span class="scorestyle">1-7</span><img src="images/flags/ger.png"/><span class="team2style"> Germany    </span><br/>
  </div>
  <div id="Match62">
    <span class="team1style">Netherlands </span><img src="images/flags/ned.png"/><span class="scorestyle">0-0</span><img src="images/flags/arg.png"/><span class="team2style"> Argentina  </span><br/>
  </div>
  <div id="Match63">
    <span class="team1style">Brazil    </span><img src="images/flags/bra.png"/><span class="scorestyle">0-3</span><img src="images/flags/ned.png"/><span class="team2style"> Netherlands  </span><br/>
  </div>
  <div id="Match64">
    <span class="team1style">Germany   </span><img src="images/flags/ger.png"/><span class="scorestyle">1-0</span><img src="images/flags/arg.png"/><span class="team2style"> Argentina  </span><br/>
  </div>
</div>


<br/><br/>
<div id="map"></div>
<br/><br/>
<div id="slider-range"></div>
<br/>
<div id="time"></div>


<script src="map_js/jquery-2.1.1.min.js"></script>
<script src="map_js/jquery-ui-1.11.0.custom/jquery-ui.min.js"></script>
<script type="text/javascript">
    $("#slider-range").slider({
        range: false,
        min: 0,
        max: 179,
        values: [0],
        slide: slideTime
    });

    function slideTime(event, ui){
        var val0 = $("#slider-range").slider("values", 0),
            minutes0 = parseInt(val0);
        startTime = getTime(minutes0);
        $("#time").text(startTime);
    }
    function getTime(minutes) {
        var time = null;
        minutes = minutes + "";
        return "Minute " + minutes;
        // + " " + hours + ":" + minutes + " " + time;
    }
    slideTime();
    $('#matches div').hide();
    $('#matches #' + $("#drop select").val()).show();
</script>


<script src="map_js/d3.js"></script>
<script src="map_js/queue.js"></script>
<script src="map_js/topojson.js"></script>


<script>
// The SVG container
var width  = 960,
    height = 550;

var color = d3.scale.category10();

var projection = d3.geo.mercator()
                .translate([480, 300])
                .scale(140);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("#map").append("svg")
    .attr("width", width)
    .attr("height", height);

var tooltip = d3.select("#map").append("div")
    .attr("class", "tooltip hidden");

queue()
    .defer(d3.json, "map_js/world-110m.json")
    .defer(d3.tsv, "map_js/world-country-names.tsv")
    .await(ready);

function ready(error, world, names) {
  if (typeof drawgraph === 'undefined'){
    setTimeout(function(){ready(error,world,names);}, 500);
  } else {
    draw_map(world, names);
    drawgraph();
  }
}

function draw_map(world, names) {

  var countries = topojson.object(world, world.objects.countries).geometries,
      neighbors = topojson.neighbors(world, countries),
      i = -1,
      n = countries.length;

  countries.forEach(function(d) { 
    d.name = names.filter(function(n) { return d.id == n.id; })[0].name; 
  });

var country = svg.selectAll(".country").data(countries);

  country
   .enter()
    .insert("path")
    .attr("class", "country")    
      .attr("title", function(d,i) { return d.name; })
      .attr("d", path)
      //.style("fill", function(d, i) { return color(d.color = d3.max(neighbors[i], function(n) { return countries[n].color; }) + 1 | 0); })
      .style("fill", "#FDB515");

    //Show/hide tooltip
    country
      .on("mousemove", function(d,i) {
        var mouse = d3.mouse(svg.node()).map( function(d) { return parseInt(d); } );

        tooltip
          .classed("hidden", false)
          .attr("style", "left:"+(mouse[0]+25)+"px;top:"+(mouse[1]+130)+"px")
          .html(d.name)
      })
      .on("mouseout",  function(d,i) {
        tooltip.classed("hidden", true)
      });

}
</script>

<script id="matches" src="map_js/Matches/Match01.js"></script>

<script>
function converttime(time){
  var d = new Date(time);
  var starttime = new Date(places[0].time)
  var converted_hour = d.getHours()-starttime.getHours();
  var converted_min = d.getMinutes();
  if (converted_hour<0){
    return (converted_hour+24)*60+converted_min;
  }
  else {return converted_hour*60+converted_min;}
}

function getpointsforminute(minute){
  var subset = [];
  for (i=0; i < places.length; i++){
    if (converttime(places[i].time) == minute){
      subset.push(places[i]);
    }
  }
  return subset;
}

function plotpoints (subset){
  svg.selectAll(".pin")
  .data(subset)
  .enter().append("circle", ".pin")
  .attr("r", function(d){return d.count*1.5+5;})
  .attr("transform", function(d) {
    return "translate(" + projection([
      d.location.longitude,
      d.location.latitude
    ]) + ")"
  })
  .style("fill", function(d){if (d.team===1) {return "#8C1515";} else {return "#003262";};})
  .style("fill-opacity", 0.70)
  // .style("stroke", "#003262")
  // .style("stroke-width", "0.5px")
  .style("stroke-opacity", 1);
}

function removepoints(){
  var circles = svg.selectAll('circle')[0];
  for (i = 0; i < circles.length; i ++){
    circles[i].remove();
  }
}

function drawgraph(){    
  removepoints();
  var slider_value = $("#slider-range").slider("values", 0);
  var minute = parseInt(slider_value);
  var subset = getpointsforminute(minute);
  plotpoints(subset);
}

function drawslide(slider_value){
  removepoints();
  var minute = parseInt(slider_value);
  var subset = getpointsforminute(minute);
  plotpoints(subset);
}
  
  $("#slider-range").on( "slidechange", function( event, ui ) {drawgraph();} );
  $("#slider-range").on( "slide", function( event, ui ) {drawslide(ui.value);} );
  $("#drop").on("change", function(event, ui){
    jQuery.getScript("map_js/Matches/" + event.target.value + ".js").done(function(){ 
      drawgraph();});
      $('#matches div').hide();
      $('#matches #' + event.target.value).show();
  })


</script>
